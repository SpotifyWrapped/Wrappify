{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Spotify Wrapped</title>
    <link id="theme-style" rel="stylesheet" href="{% static 'spotify/login-light.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body data-page="login">
    <div class="jagged-shape1"></div>
    <div class="jagged-outline1"></div>
    <div class="jagged-shape2"></div>
    <div class="jagged-outline2"></div>
    <div class="container">
        <!-- Left Content -->
        <div class="content-left">
            <img src="{% static 'spotify/images/logo.png' %}" alt="Logo" class="logo">
            <h1 class="main-heading">Your Music,<br>Your Wrapped.</h1>
            <p class="description">
                Tired of waiting to discover your Spotify Wrapped? <br>
                Wrappify allows you to make your own CUSTOM Spotify Wrapped, save it, and even quiz you on it!
                <br>Connect your Spotify account to start!
            </p>
            <a href="{% url 'redirect' %}" class="connect-button">Login with Spotify</a>
        </div>

        <!-- Right Image -->
        <div class="content-right">
            <img src="{% static 'spotify/images/phone.png' %}" alt="Phone" class="phone-image">
        </div>
    </div>

    <script>
        // Paths to your light and dark CSS files by page
        const themePaths = {
            profile: {
                light: "{% static 'spotify/profile-light.css' %}",
                dark: "{% static 'spotify/profile-dark.css' %}",
            },
            wraps: {
                light: "{% static 'spotify/wraps-light.css' %}",
                dark: "{% static 'spotify/wraps-dark.css' %}",
            },
            wraps_library: {
                light: "{% static 'spotify/library-light.css' %}",
                dark: "{% static 'spotify/library-dark.css' %}",
            },
            game: {
                light: "{% static 'spotify/game-light.css' %}",
                dark: "{% static 'spotify/game-dark.css' %}",
            },
            account: {
                light: "{% static 'spotify/account-light.css' %}",
                dark: "{% static 'spotify/account-dark.css' %}",
            },
            contacts: {
                light: "{% static 'spotify/contacts-light.css' %}",
                dark: "{% static 'spotify/contacts-dark.css' %}",
            },
            login: {
                light: "{% static 'spotify/login-light.css' %}",
                dark: "{% static 'spotify/login-dark.css' %}",
            },
        };
    
        // Get references to elements
        const themeStyle = document.getElementById('theme-style');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const darkModeText = document.getElementById('dark-mode-text');
        const darkModeIcon = document.getElementById('dark-mode-icon');
        const currentPage = document.body.dataset.page;
    
        // Function to apply the theme
        function applyTheme(theme) {
            if (currentPage && themePaths[currentPage]) {
                themeStyle.setAttribute('href', theme === 'dark' ? themePaths[currentPage].dark : themePaths[currentPage].light);
            }
            if (darkModeText) {
                darkModeText.textContent = theme === 'dark' ? 'Dark Mode' : 'Light Mode'; // Update text dynamically
            }
            if (darkModeIcon) {
                darkModeIcon.src = theme === 'dark' ? "{% static 'images/darkmode.png' %}" : "{% static 'images/lightmode.png' %}";
            }
            if (darkModeToggle) {
                darkModeToggle.checked = theme === 'dark';
            }
        }
    
        // Initialize theme from localStorage
        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);
    
        // Listen for toggle changes and update theme dynamically
        if (darkModeToggle) {
            darkModeToggle.addEventListener('change', () => {
                const newTheme = darkModeToggle.checked ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme); // Save theme to localStorage
                applyTheme(newTheme); // Apply theme to current page
            });
        }
    
        // Listen for theme changes across tabs
        window.addEventListener('storage', (event) => {
            if (event.key === 'theme') {
                applyTheme(event.newValue); // Apply the new theme when detected
            }
        });
    </script>

</body>
</html>
